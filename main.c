/*!
 * \file main.c
 *
 * \date Created on: 2012.05.11.
 * \author Author: Tamas Kovacs
 */

#include "init.h"
#include "lcd.h"
#include <avr/io.h>
#include <avr/pgmspace.h>
#include <util/delay.h>

#define s_Medence 0
#define s_Napkoll 1
#define lcd_put_CELSIUS lcd_putc(4)
#define lcd_put_min lcd_putc(0);lcd_putc(1)

#define DEFINED_CHAR 7

static const PROGMEM unsigned char defChar[] = {
		0x00, 0x00, 0x1a, 0x15, 0x15, 0x15, 0x15, 0x00,		//min
		0x0,0x0,0x16,0x5,0x15,0x15,0x15,0x0,
		0x00, 0x00, 0x03, 0x04, 0x02, 0x01, 0x06, 0x00,		//sec
		0x00, 0x00, 0x19, 0x12, 0x1a, 0x12, 0x19, 0x00,
		0x18, 0x1b, 0x04, 0x08, 0x08, 0x04, 0x03, 0x00,		//°C
//		0x4,0x4,0xe,0x11,0x11,0x11,0xe,0x0,					//ó
//		0xa,0x0,0x11,0x11,0x11,0x11,0xf,0x0,				//ü
//		0xa,0xa,0x11,0x11,0x11,0x11,0xf,0x0,				//ű
//		0x4,0x4,0x11,0x11,0x11,0x11,0xf,0x0,				//ú
//		0x4,0x4,0xe,0x11,0x1f,0x10,0xe,0x0,					//é
//		0xa,0x0,0xe,0x11,0x11,0x11,0xe,0x0,					//ö
//		0xa,0xa,0xe,0x11,0x11,0x11,0xe,0x0,					//ő
//		0x4,0x4,0xe,0x1,0xf,0x11,0xf,0x0,					//á
		0x0,0x4,0x4,0xe,0xe,0x1f,0x1f,0x0,					//fel
		0x0,0x1f,0x1f,0xe,0xe,0x4,0x4,0x0					//le
};

const PROGMEM char String1[] = "Medence:";
const PROGMEM char String2[] = "Napkoll:";

const char * StringPointers[] = {
		String1,
		String2
};

int main(void) {

	init();						//init RESET után

	lcd_puts_p(StringPointers[s_Medence]);
	lcd_puts("21");
	lcd_put_CELSIUS;
	lcd_putc('\n');
	lcd_puts_p(StringPointers[s_Napkoll]);
	lcd_puts("18");
	lcd_put_min;
	_delay_ms(5000);

    lcd_clrscr();   /* clear display home cursor */

    lcd_puts("Copyright: ");

    lcd_command(_BV(LCD_CGRAM));  /* set CG RAM start address 0 */
    for(uint8_t i = 0; i < (DEFINED_CHAR * 8); i++)
    {
        lcd_data(pgm_read_byte_near(&defChar[i]));
    }

    lcd_gotoxy(0,1);
    for(uint8_t i = 0; i < DEFINED_CHAR; i++) {
    	lcd_putc(i);
    }
    //lcd_putc(' ');
    //lcd_puts("21"); lcd_putc(4);

	for (;;);					//Loop...
	return 0;
}
